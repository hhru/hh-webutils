# Фильтрация xss в href, валидация и восстановление ссылок 

Функция validate является валидатором/реставратором для адресов, поддерживающая 3 режима работы:

1. Режим по умолчанию, 'error'. Проверка переданного адреса на ascii control characters,
отсутствие допустимой схемы (http: или https:), отсутствие домена ( ?param1=110#rr )
или ссылка на недопустимый путь ( /logoff.do ). Возвращает строку с переданным адресом или None
при нарушении любого из этих условий. Этот режим полезен для валидации данных при их
добавлении/редактировании. При этом рекомендется подсказывать пользотелю что в адрес нужно
добавлять http или https

2. Режим валидации, 'validate'. Проверяет те же условия, что и режим 'error', за исключением схемы.
Возвращает переданный url если он валиден, либо урл с добавленной схемой http при отсутствии таковой,
либо None при невозможности сделать url валидным. Режим предназначен для использования при
добавлении/редактировании данных, чтобы не заставлять пользователя вводить http.

3. Режим фильтрации, 'filter'. Вырезает недопустимые символы, пытается добавить схему при её отсутствии,
проверяет на наличие домена и допустимость пути. Предназначен для отображения уже существующих адресов,
чтобы не задумываться что могло оказаться в базе. Сейчас используетсядля фильтрации существующих ссылок
на сертификаты. Минусы - нужно учитывать, что метод может вернуть None для невалидного url.


Примеры работы можно посмотреть в тестах
https://github.com/hhru/hh-webutils/blob/master/hhwebutils_tests/test_url_validator.py
